{% extends "base.html" %}

{% block title %} - Home{% endblock %}

{% block content %}
  <h1>{{ settings.title }}</h1>
  {% if settings.tagline %}
  <p>{{ settings.tagline }}</p>
  {% endif %}

  {% if home_page %}
  <section>
    <h2>{{ home_page.title }}</h2>
    <div>
      {{ home_page.html }}
    </div>
  </section>
  {% endif %}

  {% if posts %}
  <section>
    <h2>Posts</h2>
    <ul>
      {% for post in posts %}
      <li>
        <a href="{% url 'post' post.slug %}">{{ post.title }}</a>
        {% if post.published_on %}
        <small>{{ post.published_on|date:"Y-m-d" }}</small>
        {% endif %}
      </li>
      {% endfor %}
    </ul>

    {% if posts.paginator.num_pages > 1 %}
    <nav aria-label="Pagination">
      {% if posts.has_previous %}
      <a href="?{{ filter_query }}{% if filter_query %}&{% endif %}page={{ posts.previous_page_number }}">Newer</a>
      {% endif %}
      <span>Page {{ posts.number }} of {{ posts.paginator.num_pages }}</span>
      {% if posts.has_next %}
      <a href="?{{ filter_query }}{% if filter_query %}&{% endif %}page={{ posts.next_page_number }}">Older</a>
      {% endif %}
    </nav>
    {% endif %}
  </section>
  {% endif %}
  {% if not posts and recent_posts %}
  <section>
    <h2>Recent posts</h2>
    <ul>
      {% for post in recent_posts %}
      <li>
        <a href="{% url 'post' post.slug %}">{{ post.title }}</a>
        {% if post.published_on %}
        <small>{{ post.published_on|date:"Y-m-d" }}</small>
        {% endif %}
      </li>
      {% endfor %}
    </ul>
    <p><a href="{{ posts_index_url }}">View all posts</a></p>
  </section>
  {% endif %}
{% endblock %}
