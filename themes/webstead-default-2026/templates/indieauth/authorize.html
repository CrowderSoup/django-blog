{% extends "base.html" %}

{% block content %}
  <section class="indieauth-approve">
    <h1>Authorize application</h1>
    <div class="indieauth-client">
      {% if client.logo_url %}
      <img class="indieauth-client-logo" src="{{ client.logo_url }}" alt="" />
      {% endif %}
      <div class="indieauth-client-meta">
        <p class="indieauth-client-name">{{ client.name|default:client_id }}</p>
        <p class="indieauth-client-id">{{ client_id }}</p>
      </div>
    </div>

    <p>This application is requesting access to {{ me }}.</p>

    {% if scopes %}
    <p>Requested scopes:</p>
    <ul>
      {% for scope_item in scopes %}
      <li>{{ scope_item }}</li>
      {% endfor %}
    </ul>
    {% endif %}

    <form method="post">
      {% csrf_token %}
      <input type="hidden" name="client_id" value="{{ client_id }}" />
      <input type="hidden" name="redirect_uri" value="{{ redirect_uri }}" />
      <input type="hidden" name="me" value="{{ me }}" />
      <input type="hidden" name="scope" value="{{ scope }}" />
      <input type="hidden" name="state" value="{{ state }}" />
      <input type="hidden" name="code_challenge" value="{{ code_challenge }}" />
      <input type="hidden" name="code_challenge_method" value="{{ code_challenge_method }}" />

      <label>
        <input type="checkbox" name="remember" value="1" />
        Remember this approval
      </label>

      <div class="indieauth-actions">
        <button type="submit" name="decision" value="approve">Approve</button>
        <button type="submit" name="decision" value="deny">Deny</button>
      </div>
    </form>
  </section>
{% endblock %}
