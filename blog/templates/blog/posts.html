{% extends "base.html" %}
{% block content %}
<form class="post-type-filter" action="{% url 'posts' %}" method="get" style="display:inline-flex; align-items:center; gap:0.5rem;">
  <label for="post-kind-select">Filter posts by...</label>
  <select id="post-kind-select" name="kind" onchange="this.form.submit()">
    <option value="" {% if not selected_kind %}selected{% endif %}>All</option>
    {% for kind_value, kind_label in post_kinds %}
      <option value="{{ kind_value }}" {% if selected_kind == kind_value %}selected{% endif %}>
        {{ kind_label }}
      </option>
    {% endfor %}
  </select>
</form>

<div class="h-feed">
  {% for post in posts %}
    <!-- Post Kind Detection -->
    {% if post.kind == 'note' %}
      <!-- Show Note Template -->
      {% include 'blog/note.html' %} 
    {% elif post.kind == 'photo' %}
      <!-- Show Photo Template -->
      {% include 'blog/photo.html' %} 
    {% else %}
      <!-- Show Article Template -->
      {% include 'blog/article-summary.html' %} 
    {% endif %}
  {% endfor %}
</div>


<nav class="paginator">
    {% if posts.has_previous %}
        <span class="pagination-item">
            <a href="?{% if selected_kind %}kind={{ selected_kind }}&{% endif %}page={{ posts.previous_page_number }}">&larr; Newer</a>
        </span>
    {% endif %}
    <span class="pagination-item-spacer">
        Page {{ posts.number }} of {{ posts.paginator.num_pages }}
    </span>
    {% if posts.has_next %}
        <span class="pagination-item">
            <a href="?{% if selected_kind %}kind={{ selected_kind }}&{% endif %}page={{ posts.next_page_number }}">Older &rarr;</a>
        </span>
    {% endif %}
</nav>
{% endblock %}
